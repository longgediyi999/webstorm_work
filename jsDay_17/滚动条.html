<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>

        #div1 {
            width: 25px;
            height: 500px;
            background: red;
            position: absolute;
            left: 600px;
            top: 50px;
        }

        #div2 {
            width: 25px;
            height: 25px;
            background: #000;
            position: absolute;
            cursor: pointer;
        }

    </style>
</head>
<body>
<div id="div1">
    <div id="div2"></div>
</div>
</body>
<script>

    var div1 = document.getElementById("div1");
    var div2 = document.getElementById("div2");

    div2.onmousedown = function (ev) {
        ev = ev || event;
        var disY = ev.clientY - this.offsetTop - div1.offsetTop;

        document.onmouseover = function (ev) {
            ev = ev || event;

            var t = ev.clientY - disY - div1.offsetTop;

            var maxT = div1.offsetHeight - div2.offsetHeight;

            t = t < 0 ? 0 : t;
            t = t > maxT ? maxT : t;

            div2.style.top = t + "px";
        }

        document.onmouseup = function () {
            alert(1);
            document.onmousemove = document.onmouseup = null;

        }

        return false;

    }


</script>
</html>